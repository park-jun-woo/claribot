# Claude Code 사용 전략 정리

## 문제 상황

384장짜리 기획서 기반 플랫폼 서비스 개발 중 Claude Code가 지시를 따르지 않는 문제 발생.

- **Task 저장만 하라고 해도 직접 구현하려 함**
- **CLAUDE.md에 금지 조건 명시해도 무시함**
- **커스텀 CLI(clari task, clari spec) 호출 대신 파일로 저장함**
- **기획서를 통으로 읽고 달려들다 컨텍스트 리미트 초과로 작업 손실**

## 원인 분석

### 1. 에이전틱 코딩 성향

Claude Code의 시스템 프롬프트가 "일단 해결하자"로 설계되어 있어, "하지 마라"는 지시보다 "해결하겠다"는 성향이 우선함.

### 2. 컨텍스트 내 지시 희석

대화가 길어지거나 큰 문서가 컨텍스트에 올라오면 초반 지시사항(CLAUDE.md 포함)의 영향력이 약해짐. 최신 메시지에 가중치가 더 실리는 구조.

### 3. 파일 시스템 중심 학습

Claude Code는 파일 생성/수정 중심으로 학습되어 있어, 커스텀 CLI 호출 같은 "낯선 행동"보다 "파일 저장"이라는 익숙한 행동을 우선함.

## 해결 전략

### ✅ 기획서 조회 권한 차단

- 기획서 파일에 대한 접근 권한을 주지 않는다.
- 필요한 부분만 직접 발췌해서 스펙으로 전달한다.
- **→ 읽고 달려드는 사고 자체를 원천 차단**

### ✅ 대화를 짧게 유지

- 한 세션에 하나의 작업만 시키고 끝낸다.
- 길어질수록 지시 이탈 확률 증가.

### ✅ 매 턴마다 리마인드

- "구현하지 말고 Task만 저장해"를 매번 명시적으로 붙인다.
- CLAUDE.md 하나 깔아두는 것보다 실질적으로 더 효과적.

### ✅ 커스텀 CLI → 파일 기반 워크플로우로 전환 (권장)

클로드가 파일 저장을 선호하는 성향을 역이용:

- clari task, clari spec을 **특정 경로 + 특정 포맷의 파일 저장** 방식으로 변경
- 파일 감시(watcher)로 자동으로 clari 시스템에 등록
- 클로드의 자연스러운 행동 패턴에 맞춰서 순응률 향상

### ✅ 대안: MCP 서버로 도구 등록

- CLI 호출 대신 MCP tool로 등록하면 tool use는 비교적 잘 따름
- bash → CLI 호출은 무시하기 쉽지만, tool로 등록하면 직접 호출 가능

## 핵심 원칙

> Claude Code는 "하지 마라"보다 **구조적으로 못하게 만드는 것**이 확실하다.
> 권한 차단, 파일 미제공, 짧은 세션이 지시문보다 효과적이다.